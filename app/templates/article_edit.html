{% extends "base_logged_in.html" %}

{% block script %}
    <script src="{{ url_for('static', filename='ckeditor/ckeditor.js') }}"></script>
{% endblock %}

{% block content %}

{% if blog %}
<form action="{{ url_for('blog.article_modify',blog_id=blog['_id']) }}" method="post">
    <div class="form-group">
        {{ form.hidden_tag() }}
    </div>

    <div class="form-group">
        <label>文章标题</label>
        {% if form.title.errors %}
        <div class="has-error">
            {{ form.title(class="form-control",placeholder=form.title.label.text) }}
            <dl>
                {% for error in form.title.errors %}
                <dd class="text-danger">{{ error }}</dd>
                {% endfor %}
            </dl>
        </div>
        {% else %}
        <div>
            {{ form.title(class="form-control",placeholder=form.title.label.text) }}
        </div>
        {% endif %}
    </div>

    <div class="form-group">
        <label>文章内容</label>
        <textarea name="article" id="editor" class="ckeditor">
            {{ blog['article'] }}
        </textarea>
    </div>

    <div class="form-group">
        <label class="radio-inline">
        {{ form.permission(type="radio",value="public") }}公开
        </label>
        <label class="radio-inline">
        {{ form.permission(type="radio",value="private",checked="checked") }}私人
        </label>
        {% if form.permission.errors %}
            <dl>
                {% for error in form.permission.errors %}
                <dd class="text-danger">{{ error }}</dd>
                {% endfor %}
            </dl>
        {% endif %}
    </div>

    <div class="form-group">
        {{ form.submit(class="btn btn-primary") }}
    </div>
</form>

{% else %}
<form action="{{ url_for('blog.article_add') }}" method="post">
    <div class="form-group">
        {{ form.hidden_tag() }}
    </div>

    <div class="form-group">
        <label>文章标题</label>
        {% if form.title.errors %}
        <div class="has-error">
            {{ form.title(class="form-control",placeholder=form.title.label.text) }}
            <dl>
                {% for error in form.title.errors %}
                <dd class="text-danger">{{ error }}</dd>
                {% endfor %}
            </dl>
        </div>
        {% else %}
        <div>
            {{ form.title(class="form-control",placeholder=form.title.label.text) }}
        </div>
        {% endif %}
    </div>

    <div class="form-group">
        <label>文章内容</label>
        <textarea name="article" id="editor" class="ckeditor">
        </textarea>
    </div>

    <div class="form-group">
        <label class="radio-inline">
        {{ form.permission(type="radio",value="public") }}公开
        </label>
        <label class="radio-inline">
        {{ form.permission(type="radio",value="private",checked="checked") }}私人
        </label>
        {% if form.permission.errors %}
            <dl>
                {% for error in form.permission.errors %}
                <dd class="text-danger">{{ error }}</dd>
                {% endfor %}
            </dl>
        {% endif %}
    </div>

    <div class="form-group">
        {{ form.submit(class="btn btn-primary") }}
    </div>
</form>
{% endif %}

{% endblock %}